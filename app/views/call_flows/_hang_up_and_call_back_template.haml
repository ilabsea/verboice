%script{type: "text/html", id: "hang_up_and_call_back_step_template"}
  .feditor-sidebar.right.box.w28.iblock.h65
    .tableheader
      %span.left.i48grad-phone{ ko(css: '{ "orange": is_invalid }') }
      %input.ux-text.w20.right{ ko(value: 'name', valueUpdate: '"afterkeydown"', css: '{ "error": is_name_invalid }')}

    %table.GralTable.TwoColumn.CleanTable.NoHead
      %tr
        %th Call back
        %th
      %tr
        %td
          Hang up call back the caller, continuing the Call Flow from this point.
        %td

    %br

    .content
      %div
        Call the caller
        %br
        %input{ko(checked: "when"), 'type' => 'radio', 'value' => 'immediately'} Immediately
        %br
        %input{ko(checked: "when"), 'type' => 'radio', 'value' => 'later'} Later
        %input{ko(value: 'delay', valueUpdate: '"afterkeydown"', visible: "when() == 'later'", css: '{ "error": is_delay_invalid }'), 'type' => 'text'}

      /ko if: when() == 'later'
      %div{style: 'padding-top:20px'}
        Examples for "Later":
        %ul
          %li 45 seconds
          %li 30 minutes
          %li 2 hours
          %li 7 days
      / /ko

      %br/
      %div
        Dial Prefix
        %br/
        %input.w25{'type' => 'text', 'data-bind' => 'value: dial_prefix'}
        %br/

      %table.step-ui-table
        %tr
          %td{'colspan'=> '2'}
            %br
            With retries option
        %tr
          %td Call Flow
          %td
            %select{'data-bind' => 'value: selected_call_flow_id, options: call_flow_options(), optionsText: "name", optionsValue: "id", optionsCaption: "Choose a call flow"'}
        %tr
          %td{colspan: 2}
            %br/
        %tr{'data-bind' => 'visible: selected_call_flow_id() != null'}
          %td{colspan: 2}
            Retries if the call was not pick up 
            Enter comma separated delays in hours 
        %tr{'data-bind' => 'visible: selected_call_flow_id() != null'}
          %td Retry
          %td
            %input{'type' => 'text', 'placeholder' => '1,2,4', 'data-bind' => 'value: retries'}

      .bottom-actions
        = render partial: 'bottom_actions'
